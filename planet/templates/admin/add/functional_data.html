{% extends 'admin/master.html' %}

{% block brand %}
<a class="navbar-brand" href="{{ url_for('main.screen') }}"><img src="{{ url_for('static', filename='img/icon-48x48.png') }}" style="max-width:100px;margin-left:-7px;margin-top: -13px;float:left;margin-right:5px;" width="48px"/></a>
{% endblock %}

{% block head %}
{% endblock %}

{% block body %}
{% if form %}
<h1>Add Functional data</h1>
<div class="row">
    <div class="col-lg-8 col-md-8 col-sm-6 col-xs-12">

        <p>Before adding functional data descriptions for GO terms and InterPro domains need to be added.
        Using the form below upload the latest GO (OBO file) and InterPro definitions (XML format)</p>
        <form method="POST"  action="{{ url_for('admin_controls.add_functional_data') }}"  role="form" enctype="multipart/form-data">
            {{ form.csrf_token }}
            <div class="form-group">
                <p>File with GO descriptions and relations, in OBO format, can be obtained from the <a href="http://geneontology.org/page/download-ontology">Gene Ontology Consortium</a>.
                Note that the .obo file can be compressed (gzip).</p>
                <label class="btn btn-default" for="go" id="go-file-button">
                    {{ form.go(style="display:none;", onchange="")}}
                    <span id="go-file-selector-text">Select OBO File</span>
                </label>
            </div>
            <div class="form-group">
                <p>File with InterPro descriptions and relations, in XML format, can be obtained from the <a href="https://www.ebi.ac.uk/interpro/download.html">EBI InterPro</a>. The
                XML file should <strong>not</strong> be compressed.</p>
                <label class="btn btn-default" for="interpro" id="interpro-file-button">
                    {{ form.interpro(style="display:none;", onchange="")}}
                    <span id="interpro-file-selector-text">Select XML File</span>
                </label>
            </div>

        <button type="submit" class="btn btn-primary pull-right">Add functional data</button>

        </form>
    </div>
    <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
        <div class="panel panel-default">
            <div class="panel-heading"><strong>Help</strong></div>
            <div class="panel-body">
                GO terms and InterPro domain descriptions need to be imported prior to importing functional annotation per
                species. These can be obtained from th <a href="http://geneontology.org/page/download-ontology">Gene Ontology Consortium</a>
                and <a href="https://www.ebi.ac.uk/interpro/download.html">EBI InterPro</a>.
            </div>
        </div>
    </div>
</div>
{% endif %}

{% endblock %}

{% block tail %}
<script src="{{ url_for('static', filename='js/jscolor.min.js') }}"></script>
<script>
$(function() {
    $("#go").change(function() {
        $('#go-file-selector-text').html($(this).val().replace(/^.*\\/, '') + ' selected');$('#go-file-button').toggleClass('btn-default btn-success');
    });
    $("#interpro").change(function() {
        $('#interpro-file-selector-text').html($(this).val().replace(/^.*\\/, '') + ' selected');$('#interpro-file-button').toggleClass('btn-default btn-success');
    });
});
</script>
{% endblock%}